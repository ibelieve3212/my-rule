#å›å®¶ssèŠ‚ç‚¹
listeners:
  - name: ss-home
    type: shadowsocks
    port: <port>
    listen: 0.0.0.0
    cipher: aes-128-gcm
    password: <PASSWORD>
    udp: true

######### é”šç‚¹ start #######
# ç­–ç•¥ç»„ç›¸å…³
pr:
  &pr {
    type: select,
    proxies:
      [
        âš¡ å…¨å±€è§„åˆ™,
        â™»ï¸ è‡ªåŠ¨åˆ‡æ¢,
        ğŸš€ æ‰‹åŠ¨åˆ‡æ¢,
        DIRECT,
        ä½å€ç‡,
        ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨,
        ğŸ‡¨ğŸ‡³ å°æ¹¾è‡ªåŠ¨,
        ğŸ‡¯ğŸ‡µ æ—¥æœ¬è‡ªåŠ¨,
        ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡è‡ªåŠ¨,
        ğŸ‡ºğŸ‡² ç¾å›½è‡ªåŠ¨,
        ğŸ‡°ğŸ‡· éŸ©å›½è‡ªåŠ¨,
        ğŸ‡©ğŸ‡ª å¾·å›½è‡ªåŠ¨,
        ğŸ‡­ğŸ‡° é¦™æ¸¯æ‰‹åŠ¨,
        ğŸ‡¨ğŸ‡³ å°æ¹¾æ‰‹åŠ¨,
        ğŸ‡¯ğŸ‡µ æ—¥æœ¬æ‰‹åŠ¨,
        ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡æ‰‹åŠ¨,
        ğŸ‡ºğŸ‡² ç¾å›½æ‰‹åŠ¨,
        ğŸ‡°ğŸ‡· éŸ©å›½æ‰‹åŠ¨,
        ğŸ‡©ğŸ‡ª å¾·å›½æ‰‹åŠ¨,
      ],
  }

#è¿™é‡Œæ˜¯è®¢é˜…æ›´æ–°å’Œå»¶è¿Ÿæµ‹è¯•ç›¸å…³çš„
p:
  &p {
    type: http,
    interval: 3600,
    health-check:
      {
        enable: true,
        url: https://captive.apple.com/generate_204,
        interval: 300,
      },
  }
u:
  &u {
    url: https://captive.apple.com/generate_204,
    interval: 300,
    tolerance: 10,
    timeout: 5000,
  }

######### é”šç‚¹ end #######

# url é‡Œå¡«å†™è‡ªå·±çš„è®¢é˜…,åç§°ä¸èƒ½é‡å¤
proxy-providers:
  èŠ±äº‘:
    <<: *p
    url: "https://api.xmancdn.com/osubscribe.php?sid=1545&token=ROved1PK&sip002=1"
    path: ./proxy_provider/huayun.yaml
    exclude-filter: "Traffic|Expire"
  # ç¬¬äºŒä¸ªæœºåœºï¼Œå¦‚æœ‰å°±è§£å¼€æ³¨é‡Šï¼Œåç§°ä¸èƒ½é‡å¤,pathï¼ˆæ–‡ä»¶ä½ç½®ï¼‰ä¸èƒ½é‡å¤ï¼Œå¹¶åœ¨12è¡Œé‚£è§£å¼€provider2çš„æ³¨é‡Š
  worker1:
    <<: *p
    url: ""
    path: ./proxy_provider/worker1.yaml
  worker2:
    <<: *p
    url: ""
    path: ./proxy_provider/worker2.yaml
    exclude-filter: "ç”µä¿¡|è”é€š|ç§»åŠ¨|é¢‘é“|IPV6"
  # æœ¬åœ°æ–‡ä»¶
  custom:
    <<: *p
    type: file
    path: ./proxy_provider/custom.yaml

proxy-groups:
  - {
      name: âš¡ å…¨å±€è§„åˆ™,
      type: select,
      proxies:
        [
          â™»ï¸ è‡ªåŠ¨åˆ‡æ¢,
          ğŸš€ æ‰‹åŠ¨åˆ‡æ¢,
          DIRECT,
          ä½å€ç‡,
          ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨,
          ğŸ‡¨ğŸ‡³ å°æ¹¾è‡ªåŠ¨,
          ğŸ‡¯ğŸ‡µ æ—¥æœ¬è‡ªåŠ¨,
          ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡è‡ªåŠ¨,
          ğŸ‡ºğŸ‡² ç¾å›½è‡ªåŠ¨,
          ğŸ‡°ğŸ‡· éŸ©å›½è‡ªåŠ¨,
          ğŸ‡©ğŸ‡ª å¾·å›½è‡ªåŠ¨,
          ğŸ‡­ğŸ‡° é¦™æ¸¯æ‰‹åŠ¨,
          ğŸ‡¨ğŸ‡³ å°æ¹¾æ‰‹åŠ¨,
          ğŸ‡¯ğŸ‡µ æ—¥æœ¬æ‰‹åŠ¨,
          ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡æ‰‹åŠ¨,
          ğŸ‡ºğŸ‡² ç¾å›½æ‰‹åŠ¨,
          ğŸ‡°ğŸ‡· éŸ©å›½æ‰‹åŠ¨,
          ğŸ‡©ğŸ‡ª å¾·å›½æ‰‹åŠ¨,
        ],
    }
  - { name: â™»ï¸ è‡ªåŠ¨åˆ‡æ¢, type: url-test, include-all-providers: true, <<: *u }
  - { name: ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, type: select, include-all-providers: true }
  - {
      name: ğŸ¥ EmbyæœåŠ¡,
      type: select,
      proxies:
        [
          âš¡ å…¨å±€è§„åˆ™,
          â™»ï¸ è‡ªåŠ¨åˆ‡æ¢,
          ğŸš€ æ‰‹åŠ¨åˆ‡æ¢,
          DIRECT,
          ä½å€ç‡,
          ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨,
          ğŸ‡¨ğŸ‡³ å°æ¹¾è‡ªåŠ¨,
          ğŸ‡¯ğŸ‡µ æ—¥æœ¬è‡ªåŠ¨,
          ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡è‡ªåŠ¨,
          ğŸ‡ºğŸ‡² ç¾å›½è‡ªåŠ¨,
          ğŸ‡°ğŸ‡· éŸ©å›½è‡ªåŠ¨,
          ğŸ‡©ğŸ‡ª å¾·å›½è‡ªåŠ¨,
          ğŸ‡­ğŸ‡° é¦™æ¸¯æ‰‹åŠ¨,
          ğŸ‡¨ğŸ‡³ å°æ¹¾æ‰‹åŠ¨,
          ğŸ‡¯ğŸ‡µ æ—¥æœ¬æ‰‹åŠ¨,
          ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡æ‰‹åŠ¨,
          ğŸ‡ºğŸ‡² ç¾å›½æ‰‹åŠ¨,
          ğŸ‡°ğŸ‡· éŸ©å›½æ‰‹åŠ¨,
          ğŸ‡©ğŸ‡ª å¾·å›½æ‰‹åŠ¨,
        ],
    }
  - { name: ğŸ“¢ GoogleæœåŠ¡, <<: *pr }
  - { name: ğŸ“² Telegram, <<: *pr }
  - { name: â“‚ï¸ å¾®è½¯æœåŠ¡, <<: *pr }
  - { name: ğŸ AppleæœåŠ¡, <<: *pr }
  - { name: ğŸµ Spotify, <<: *pr }
  - { name: â–¶ï¸ å¥ˆé£æœåŠ¡, <<: *pr }
  - { name: ğŸ’§ Twitter, <<: *pr }
  - {
      name: ğŸ‡¨ğŸ‡³ å›½å†…,
      type: select,
      proxies: [DIRECT, â™»ï¸ è‡ªåŠ¨åˆ‡æ¢, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, âš¡ å…¨å±€è§„åˆ™],
    }
  #- { name: å…¶ä»–, <<: *pr }
  - {
      name: ä½å€ç‡,
      type: url-test,
      include-all-providers: true,
      filter: "å®éªŒæ€§",
      <<: *u,
    }

  #åˆ†éš”,ä¸‹é¢æ˜¯åœ°åŒºåˆ†ç»„
  - {
      name: ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨,
      type: url-test,
      include-all-providers: true,
      filter: "(?i)æ¸¯|hk|hongkong|hong kong",
      <<: *u,
    }
  - {
      name: ğŸ‡¨ğŸ‡³ å°æ¹¾è‡ªåŠ¨,
      type: url-test,
      include-all-providers: true,
      filter: "(?i)å°|æ–°åŒ—|å½°åŒ–|TW|Taiwan",
      <<: *u,
    }
  - {
      name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬è‡ªåŠ¨,
      type: url-test,
      include-all-providers: true,
      filter: "(?i)æ—¥|jp|japan",
      <<: *u,
    }
  - {
      name: ğŸ‡ºğŸ‡² ç¾å›½è‡ªåŠ¨,
      type: url-test,
      include-all-providers: true,
      filter: "(?i)ç¾|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States",
      <<: *u,
    }
  - {
      name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡è‡ªåŠ¨,
      type: url-test,
      include-all-providers: true,
      filter: "(?i)(æ–°|sg|singapore)",
      <<: *u,
    }
  - {
      name: ğŸ‡°ğŸ‡· éŸ©å›½è‡ªåŠ¨,
      type: url-test,
      include-all-providers: true,
      filter: "(?i)(KR|Korea|KOR|é¦–å°”|éŸ©|éŸ“|æ˜¥å·)",
      <<: *u,
    }
  - {
      name: ğŸ‡©ğŸ‡ª å¾·å›½è‡ªåŠ¨,
      type: url-test,
      include-all-providers: true,
      filter: "(?i)(å¾·|Germany)",
      <<: *u,
    }
  - {
      name: ğŸ‡­ğŸ‡° é¦™æ¸¯æ‰‹åŠ¨,
      type: select,
      include-all-providers: true,
      filter: "(?i)æ¸¯|hk|hongkong|hong kong",
    }
  - {
      name: ğŸ‡¨ğŸ‡³ å°æ¹¾æ‰‹åŠ¨,
      type: select,
      include-all-providers: true,
      filter: "(?i)å°|æ–°åŒ—|å½°åŒ–|TW|Taiwan",
    }
  - {
      name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬æ‰‹åŠ¨,
      type: select,
      include-all-providers: true,
      filter: "(?i)æ—¥|jp|japan",
    }
  - {
      name: ğŸ‡ºğŸ‡² ç¾å›½æ‰‹åŠ¨,
      type: select,
      include-all-providers: true,
      filter: "(?i)ç¾|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States",
    }
  - {
      name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡æ‰‹åŠ¨,
      type: select,
      include-all-providers: true,
      filter: "(?i)(æ–°|sg|singapore)",
    }
  - {
      name: ğŸ‡°ğŸ‡· éŸ©å›½æ‰‹åŠ¨,
      type: select,
      include-all-providers: true,
      filter: "(?i)(KR|Korea|KOR|é¦–å°”|éŸ©|éŸ“|æ˜¥å·)",
    }
  - {
      name: ğŸ‡©ğŸ‡ª å¾·å›½æ‰‹åŠ¨,
      type: select,
      include-all-providers: true,
      filter: "(?i)(å¾·|Germany)",
    }
  - {
      name: ğŸŸ æ¼ç½‘ä¹‹é±¼,
      type: select,
      proxies: [âš¡ å…¨å±€è§„åˆ™, â™»ï¸ è‡ªåŠ¨åˆ‡æ¢, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, DIRECT],
    }

rules:
  #åŸŸåè§„åˆ™
  - GEOIP,lan,DIRECT,no-resolve
  - RULE-SET,direct_domain,DIRECT
  - RULE-SET,reject_domain,REJECT
  - RULE-SET,emby_domain,ğŸ¥ EmbyæœåŠ¡
  - RULE-SET,emby2_domain,ğŸ¥ EmbyæœåŠ¡
  - RULE-SET,apple_domain,ğŸ AppleæœåŠ¡
  - RULE-SET,ehentai_domain,âš¡ å…¨å±€è§„åˆ™
  - RULE-SET,github_domain,âš¡ å…¨å±€è§„åˆ™
  - RULE-SET,twitter_domain,ğŸ’§ Twitter
  - RULE-SET,youtube_domain,ğŸ“¢ GoogleæœåŠ¡
  - RULE-SET,google_domain,ğŸ“¢ GoogleæœåŠ¡
  - RULE-SET,telegram_domain,ğŸ“² Telegram
  - RULE-SET,netflix_domain,â–¶ï¸ å¥ˆé£æœåŠ¡
  - RULE-SET,bilibili_domain,ğŸ‡¨ğŸ‡³ å›½å†…
  - RULE-SET,microsoft_domain,â“‚ï¸ å¾®è½¯æœåŠ¡
  - RULE-SET,spotify_domain,ğŸµ Spotify
  - RULE-SET,pixiv_domain,âš¡ å…¨å±€è§„åˆ™
  - RULE-SET,cn_domain,ğŸ‡¨ğŸ‡³ å›½å†…
  #- RULE-SET,geolocation-!cn,ğŸŸ æ¼ç½‘ä¹‹é±¼

  #IPè§„åˆ™
  - RULE-SET,google_ip,ğŸ“¢ GoogleæœåŠ¡
  - RULE-SET,netflix_ip,â–¶ï¸ å¥ˆé£æœåŠ¡
  - RULE-SET,telegram_ip,ğŸ“² Telegram
  - RULE-SET,twitter_ip,ğŸ’§ Twitter
  - RULE-SET,cn_ip,ğŸ‡¨ğŸ‡³ å›½å†…
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼

rule-anchor:
  ip: &ip { type: http, interval: 86400, behavior: ipcidr, format: text }
  domain:
    &domain { type: http, interval: 86400, behavior: domain, format: text }
rule-providers:
  private:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.list"
  cn_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.list"
  emby_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/lamysafari88/ruleset/master/clash/emby.list"
  emby2_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/ibelieve3212/my-rule/main/emby.list"
  ehentai_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ehentai.list"
  github_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.list"
  twitter_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/twitter.list"
  youtube_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.list"
  google_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.list"
  telegram_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.list"
  netflix_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.list"
  bilibili_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bilibili.list"
  spotify_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/spotify.list"
  pixiv_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/pixiv.list"
  geolocation-!cn:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.list"
  apple_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple.list"
  microsoft_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft.list"
  direct_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/ibelieve3212/my-rule/main/direct.list"
  reject_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/ibelieve3212/my-rule/main/reject.list"

  cn_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.list"
  google_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.list"
  netflix_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/netflix.list"
  twitter_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/twitter.list"
  telegram_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.list"
