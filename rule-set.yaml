######### é”šç‚¹ start #######
# ç­–ç•¥ç»„ç›¸å…³
pr: &pr {type: select, proxies: [é»˜è®¤, ç›´è¿, é¦™æ¸¯, å°æ¹¾, æ—¥æœ¬, æ–°åŠ å¡, ç¾å›½, éŸ©å›½, å¾·å›½, å…¶å®ƒåœ°åŒº, å…¨éƒ¨èŠ‚ç‚¹]}

#è¿™é‡Œæ˜¯è®¢é˜…æ›´æ–°å’Œå»¶è¿Ÿæµ‹è¯•ç›¸å…³çš„
p: &p {type: http, interval: 3600, health-check: {enable: true, url: https://1.1.1.1/generate_204, interval: 300}}

######### é”šç‚¹ end #######

# url é‡Œå¡«å†™è‡ªå·±çš„è®¢é˜…,åç§°ä¸èƒ½é‡å¤
proxy-providers:
  èµ”é’±:
    <<: *p
    url: ""
    path: ./proxy_provider/èµ”é’±.yaml
    health-check:
      enable: true
      url: https://1.1.1.1/generate_204
      interval: 300
# ç¬¬äºŒä¸ªæœºåœºï¼Œå¦‚æœ‰å°±è§£å¼€æ³¨é‡Šï¼Œåç§°ä¸èƒ½é‡å¤,pathï¼ˆæ–‡ä»¶ä½ç½®ï¼‰ä¸èƒ½é‡å¤ï¼Œå¹¶åœ¨12è¡Œé‚£è§£å¼€provider2çš„æ³¨é‡Š
  èŠ±äº‘:
    <<: *p
    url: ""
    path: ./proxy_provider/èŠ±äº‘.yaml
    health-check:
      enable: true
      url: https://1.1.1.1/generate_204
      interval: 300
# æœ¬åœ°æ–‡ä»¶
  custom:
    <<: *p
    type: file
    path: ./proxy_provider/custom.yaml
    health-check:
      enable: true
      url: https://1.1.1.1/generate_204
      interval: 300

proxies:
- name: "ç›´è¿"
  type: direct
  udp: true
proxy-groups:
  - {name: é»˜è®¤, type: select, proxies: [è‡ªåŠ¨é€‰æ‹©, é¦™æ¸¯, å°æ¹¾, æ—¥æœ¬, æ–°åŠ å¡, ç¾å›½, éŸ©å›½, å¾·å›½, å…¶å®ƒåœ°åŒº, å…¨éƒ¨èŠ‚ç‚¹, ç›´è¿]}
  - {name: Emby, type: select, proxies: [é»˜è®¤, è‡ªåŠ¨é€‰æ‹©, é¦™æ¸¯, å°æ¹¾, æ—¥æœ¬, æ–°åŠ å¡, ç¾å›½, éŸ©å›½, å¾·å›½, å…¶å®ƒåœ°åŒº, å…¨éƒ¨èŠ‚ç‚¹]}
  - {name: Google, <<: *pr}
  - {name: Telegram, <<: *pr}
  - {name: Twitter, <<: *pr}
  - {name: å“”å“©ä¸œå—äºš, <<: *pr}
  - {name: å·´å“ˆå§†ç‰¹, <<: *pr}
  - {name: NETFLIX, <<: *pr}
  - {name: Spotify, <<: *pr}
  - {name: å›½å†…, type: select, proxies: [ç›´è¿, é»˜è®¤, é¦™æ¸¯, å°æ¹¾, æ—¥æœ¬, æ–°åŠ å¡, ç¾å›½, å…¶å®ƒåœ°åŒº, å…¨éƒ¨èŠ‚ç‚¹, è‡ªåŠ¨é€‰æ‹©]}
  - {name: å…¶ä»–, <<: *pr}

#åˆ†éš”,ä¸‹é¢æ˜¯åœ°åŒºåˆ†ç»„
  - {name: é¦™æ¸¯, type: select , include-all-providers: true, filter: "(?i)æ¸¯|hk|hongkong|hong kong"}
  - {name: å°æ¹¾, type: select , include-all-providers: true, filter: "(?i)å°|æ–°åŒ—|å½°åŒ–|TW|Taiwan"}
  - {name: æ—¥æœ¬, type: select , include-all-providers: true, filter: "(?i)æ—¥|jp|japan"}
  - {name: ç¾å›½, type: select , include-all-providers: true, filter: "(?i)ç¾|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States"}
  - {name: æ–°åŠ å¡, type: select , include-all-providers: true, filter: "(?i)(æ–°|sg|singapore)"}
  - {name: éŸ©å›½, type: select , include-all-providers: true, filter: "(?i)(KR|Korea|KOR|é¦–å°”|éŸ©|éŸ“|æ˜¥å·)"}
  - {name: å¾·å›½, type: select , include-all-providers: true, filter: "(?i)(å¾·|DE|DEU|Germany)"}
  - {name: å…¶å®ƒåœ°åŒº, type: select , include-all-providers: true, filter: "(?i)^(?!.*(?:ğŸ‡­ğŸ‡°|ğŸ‡¯ğŸ‡µ|ğŸ‡ºğŸ‡¸|ğŸ‡¸ğŸ‡¬|ğŸ‡¨ğŸ‡³|æ¸¯|hk|hongkong|å°|tw|taiwan|æ—¥|jp|japan|æ–°|sg|singapore|ç¾|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States|KR|Korea|KOR|é¦–å°”|éŸ©|éŸ“|æ˜¥å·|å¾·|DE|DEU|Germany)).*"}
  - {name: å…¨éƒ¨èŠ‚ç‚¹, type: select , include-all-providers: true}
  - {name: è‡ªåŠ¨é€‰æ‹©, type: url-test, include-all-providers: true, tolerance: 10}

rules:
#åŸŸåè§„åˆ™
  - GEOIP,lan,ç›´è¿,no-resolve
  - RULE-SET,emby_domain,Emby
  - RULE-SET,biliintl_domain,å“”å“©ä¸œå—äºš
  - RULE-SET,ehentai_domain,é»˜è®¤
  - RULE-SET,github_domain,é»˜è®¤
  - RULE-SET,twitter_domain,Twitter
  - RULE-SET,youtube_domain,Google
  - RULE-SET,google_domain,Google
  - RULE-SET,telegram_domain,Telegram
  - RULE-SET,netflix_domain,NETFLIX
  - RULE-SET,bilibili_domain,å›½å†…
  - RULE-SET,bahamut_domain,å·´å“ˆå§†ç‰¹
  - RULE-SET,spotify_domain,Spotify
  - RULE-SET,pixiv_domain,é»˜è®¤
  - RULE-SET,cn_domain,å›½å†…
  - RULE-SET,geolocation-!cn,å…¶ä»–
  
#IPè§„åˆ™
  - RULE-SET,google_ip,Google
  - RULE-SET,netflix_ip,NETFLIX
  - RULE-SET,telegram_ip,Telegram
  - RULE-SET,twitter_ip,Twitter
  - RULE-SET,cn_ip,å›½å†…
  - MATCH,å…¶ä»–

rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: text}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: text}
rule-providers:
  private:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.list"
  cn_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.list"
  emby_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/mswarmtree/ruleset/master/clash/emby.list"
  biliintl_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/biliintl.list"
  ehentai_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ehentai.list"
  github_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.list"
  twitter_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/twitter.list"
  youtube_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.list"
  google_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.list"
  telegram_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.list"
  netflix_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.list"
  bilibili_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bilibili.list"
  bahamut_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bahamut.list"
  spotify_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/spotify.list"
  pixiv_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/pixiv.list"
  geolocation-!cn:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.list"

  cn_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.list"
  google_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.list"
  netflix_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/netflix.list"
  twitter_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/twitter.list"
  telegram_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.list"